<!DOCTYPE html>
<html>
<head>
  <title> Wherever you are from </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flexboxgrid/6.3.1/flexboxgrid.css" />
  <link rel="stylesheet" href="css/app.css">
  <link rel="icon" type="image/png" href="img/favicon.png">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <script type="text/javascript">
      var qNumber=0
      var flagName=''
      var imgDir='img/flags/';

      function setQuestionFlags(but)
      {
        if (but!=null)
        {
          S=String(but.innerHTML)
          if (S=='') {return false}
          S=S.substring(S.length-7,S.length-6)
          flagName=flagName+S
          document.getElementById('pagecounter').innerText=qNumber+1+' / 6'
        if (qNumber==6)
          {
            questionFlag('','',1)
            questionFlag('','',2)
            questionFlag('','',3)
            setQuestion(flagName)
          }
          if (qNumber==7)
            {
              return false
            }
        }
        qNumber=qNumber+1
        questionFlag(qNumber,'A',1)
        if (qNumber==1){
          $('.quiz-dot').css('background', 'transparent');
          $('.quiz-dot-1').css('background', 'black');
        }
        if (qNumber==2){
          $('.quiz-dot').css('background', 'transparent');
          $('.quiz-dot-2').css('background', 'black');
        }
        if (qNumber==3){
          $('.quiz-dot').css('background', 'transparent');
          $('.quiz-dot-3').css('background', 'black');
        }
        if (qNumber==4){
          $('.quiz-dot').css('background', 'transparent');
          $('.quiz-dot-4').css('background', 'black');
        }
        if (qNumber==5){
          $('.quiz-dot').css('background', 'transparent');
          $('.quiz-dot-5').css('background', 'black');
        }
        if (qNumber==6){
          $('.quiz-dot').css('background', 'transparent');
          $('.quiz-dot-6').css('background', 'black');
        }
        if (qNumber>=7){
          $('.navL, .pagecounter, .quiz-dots, .quiz-flag, #symb1, #symb2, #symb3, .instructions-mobile.top-margin').css('display', 'none');
        }
        if (qNumber==1 | qNumber==6 )
        {
        questionFlag(qNumber,'',2)
        questionFlag(qNumber,'B',3)
        }
        else
        {
        questionFlag(qNumber,'B',2)
        questionFlag(qNumber,'C',3)
        }
      }


    function setQuestion(flagName)
      {
        H='<p>...<br/>Before discovering your current State… <br>What is your Nationality?</p><br><form id="myForm" action="" method="POST" target="no-target"><INPUT TYPE="text" PlaceHolder="Your nationality" id="whereverfield" name="wherever"><INPUT TYPE="hidden" id="myflagfield" name="flag" value="'+flagName+'"><br><br><button id="subBut" class="button-large button-disabled" onclick="sendToGoogle();" style-"cursor:pointer;">START</button></form>'
        document.getElementById('Instructions').innerHTML=H

        $( "#whereverfield" ).keyup(function() {
          $('#subBut').removeClass('button-disabled');
          $('#subBut').addClass('button-dark');
          if ($.trim($(this).val()).length == 0){
            $('#subBut').removeClass('button-dark');
            $('#subBut').addClass('button-disabled');
          }
        });

        $('#subBut').click(function() {
          $(".finding-results").show();
          $(".quiz-row").css('display', 'none');
          $(".results").css('display', 'block');
          $("body").css('background', 'black');
          setTimeout(function() { $(".finding-results").hide(); }, 2000);
        });
      }

    function setFlag(tag,Fname)
      {
       document.getElementById(tag).innerHTML='<img style="width: 100%;" src="'+imgDir+Fname+'.png'+'">'
      }

    function questionFlag(n,Letter,pos)
      {
        Typ='.png'
        if (Letter=='')
        {
         document.getElementById('symb'+pos).innerHTML=''
        }
        else
        {
          F=imgDir+n+'_'+Letter+Typ
          document.getElementById('symb'+pos).innerHTML='<img class="quiz-flag" src="'+F+'">'
        }
      }

  function sendToGoogle()
    {
      F=document.forms[0];
      var baseURL='https://docs.google.com/forms/d/e/1FAIpQLSeSrk5O3OzgvC8Xse8zLXy8TR2GACMDkadiJq-OnydQH1qbmw/formResponse?';
      var submitRef='&submit=Submit';
      whereverid='&entry.444671557='
      flagid='&entry.522666394='
      wherever=F.wherever.value;
      flag=F.flag.value;
      submitURL=(baseURL+whereverid+wherever+flagid+flag+submitRef);

      // https://docs.google.com/forms/d/e/1FAIpQLSeSrk5O3OzgvC8Xse8zLXy8TR2GACMDkadiJq-OnydQH1qbmw/formResponse?&entry.444671557=fds&entry.522666394=BCCCCB&submit=Submit

      F.action=submitURL;
      F.submit()
      F.wherever.value='thank you';
      B=document.getElementById('subBut')
      B.style='visibility:hidden;'
      setFlag('symb2',flagName);
      document.getElementById('pagecounter').innerHTML='You have now completed your personal flag <a href="index.html?wherever='+wherever+'&flag='+flag+'">home</a>';
      setFlag('bigflag',flagName);
      BF=document.getElementById('bigflag');
      BF.style.zIndex=3;
      BF.style.opacity=1

      console.log(F);

      $.getJSON('http://gd.geobytes.com/GetCityDetails?callback=?', function(data) {
        console.log(JSON.stringify(data.geobytestitle, null, 2));
      });

    }

  function readGoogleData()
    {
      var baseURL='https://docs.google.com/spreadsheets/d/19nkbb5aKbapOld1R888cI7Z_b4TaaLxpPFa92IZcyEw/edit#gid=642024333';
      var baseURL='https://spreadheets.google.com/feeds/list/d/19nkbb5aKbapOld1R888cI7Z_b4TaaLxpPFa92IZcyEw/1/public/basic?alt=json';
      var sheetURL='https://docs.google.com/spreadsheets/d/19nkbb5aKbapOld1R888cI7Z_b4TaaLxpPFa92IZcyEw?alt=jsonp';
      $.ajax({url:sheetURL,datatype:'jsonp',user:'anouksy@gmail.com',password:'ysabel87',crossDomain: true, xhrFields:{ withCredentials:true}})
    }






  </script>
</head>
<body>

  <div class="exit-quiz-modal">
    <div class="modal-inner">
      <p class="label">
        Your current state
      </p>
      <p class="info">
        Are you sure you want to quit the test?
        You can always come back and  do another one later.
      </p>
      <div class="button-dark button-large close-modal">
        Continue test
      </div>
      <a href="index.html" class="button-light button-large">
        Exit test
      </a>
    </div>
  </div>

  <div class="content-container">

    <div class="wrapperQ">
      <div class="close-quiz-button">
        <div>
          <img src="img/close.svg" />
        </div>
      </div>



      <div class="navL" onclick="setFlags()">
        <img src="img/back.svg" onclick="goBack()">
      </div>

      <div id="pagecounter" class="pagecounter">
        1 / 6
      </div>

      <div class="quiz-dots">
        <div class="quiz-dot quiz-dot-1"></div>
        <div class="quiz-dot quiz-dot-2"></div>
        <div class="quiz-dot quiz-dot-3"></div>
        <div class="quiz-dot quiz-dot-4"></div>
        <div class="quiz-dot quiz-dot-5"></div>
        <div class="quiz-dot quiz-dot-6"></div>
      </div>

      <div class="row quiz-row">
        <!-- <div class="col-xs-2 col-sm-1"> -->

        <!-- </div> -->
        <div class="col-xs-12">
          <div id="Instructions" class="instructions">
            <p class="label">YOUR CURRENT STATE</p>
            <p class="instructions instructions-desktop">On each of the following screens, select one of the presented shapes.  Follow your gut feeling…</p>
            <p class="instructions instructions-mobile">
              On each of the following screens,  select one of the presented shapes.
            </p>
          </div>
          <div class="row flag-row">
            <div class="col-xs-12 col-sm-4">
              <div id="symb1" class="symb" onclick="setQuestionFlags(this)">
              </div>
            </div>
            <div class="col-xs-12 col-sm-4">
              <div id="symb3" class="symb" onclick="setQuestionFlags(this)">
              </div>
            </div>
            <div class="col-xs-12 col-sm-4">
              <div id="symb2" class="symb" onclick="setQuestionFlags(this)">
              </div>
            </div>
          </div>
          <div class="row instructions-mobile top-margin">
            <div class="col-xs-12 center">
              <p class="instructions">
                Follow your gut feeling to find your true current state.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>




    <div class="finding-results center">
      <div class="finding-results-inner">
        <img src="img/logo-white.png" />
        <p class="label">
          FINDING your current state…
        </p>
      </div>
    </div>



  </div>







  <!-- <div class="wrapperQ"> -->
    <!-- <div class="navL" onclick="setFlags()">
      <img src="img/back.svg" onclick="goBack()">
    </div> -->





    <!-- <div class="navR"> -->
      <!-- <img src="img/back.png" onclick="goBack()"> -->
    <!-- </div> -->
  <iframe src="#" id="no-target" name="no-target" style="visibility:hidden"></iframe>
  <!-- </div> -->

  <div class="exit-quiz-modal share-modal">
    <div class="modal-inner">
      <div class="close-share-modal-button">
        <img src="img/close.svg" />
      </div>
      <p class="label">
        Share your current state
      </p>
      <p class="info">
        Send it to your own email address,<br>
         or share it with your friends!
      </p>
      <form>
        <input type="email" placeholder="Email address"/>
        <input type="submit" class="button-disabled button-large share-submit" value="Send to email">
      </form>
    </div>
  </div>

  <div class="results white">

    <!-- desktop navigation -->
    <nav class="nav-desktop">
      <div class="row">
        <div class="col-xs-12 col-sm-5">
          <a class="home-link" href="#top-page">
            <img src="img/logo-white.png" />
          </a>
          <a class="home-link" href="#top-page">
            <span>Wherever</span>
          </a>
        </div>
        <div class="col-xs-12 col-sm-7">
          <div class="right nav-right">
            <a class="nav-link" href="#about">About</a>
            <a class="nav-link" href="#states">States</a>
            <a class="nav-link button-small button-secondary" href="quiz.html">Retake Test</a>
          </div>
        </div>
      </div>
    </nav>
    <!-- end desktop navigation -->

    <!-- mobile navigation -->
    <nav class="nav-mobile">
      <div class="menu-trigger">
        <img src="img/logo-white.png" />
      </div>
      <div class="retake-button">
        <a class="nav-link button-small button-secondary" href="quiz.html">Retake Test</a>
      </div>

      <div class="slide-menu">
        <div class="close-button">
          <img src="img/close.svg" />
        </div>
        <ul>
          <li>
            <a class="label" href="#top">Wherever</a>
          </li>
          <li>
            <a class="label" href="#about">About</a>
          </li>
          <li>
            <a class="label" href="#states">States</a>
          </li>
          <li class="tall">
            <p class="label">
              Your current state
            </p>
            <a href="quiz.html" class="button-large button-dark">Find Out</a>
          </li>
        </ul>
        <div class="row contact-row">
          <div class="col-xs-3 center">
            <a href="https://www.instagram.com/mixed.identities/?hl=en">
              <img src="img/instagram-black.svg" />
            </a>
          </div>
          <div class="col-xs-9">
            <a class="text-link black" href="www.anouksylvestre.com">www.anouksylvestre.com</a>
          </div>
          <div class="col-xs-3 center">
            <a href="#" class="facebook-link">
              <img src="img/facebook-black.svg" />
            </a>
          </div>
          <div class="col-xs-9">
            <a class="email-link black" href="anouk.sylvestre@hotmail.com">anouk.sylvestre@hotmail.com</a>
          </div>
        </div>
      </div>
    </nav>
    <!-- end mobile navigation -->

    <div class="content-container">
      <div class="results-container">
        <div class="row">
          <div class="col-xs-12 col-sm-6 col-md-5">
            <div class="current-state-container">
              <p class="label">
                YOUR CURRENT STATE iS
              </p>
              <p class="current-state" id="currentState">

              </p>
              <a href="#" class="share-button button-large button-light">
                Share
              </a>
            </div>
          </div>
          <div class="col-xs-12 col-sm-6 col-md-7">
            <div id="bigflag" class="bigFlag">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
  <script type="text/javascript">
//  readGoogleData();
  setQuestionFlags()
  </script>

  <script>

  $('.close-quiz-button').click(function() {
    $('.exit-quiz-modal').fadeIn();
  });

  $('.close-modal').click(function() {
    $('.exit-quiz-modal').fadeOut();
  });




  // mobile menu triggers
  $('.menu-trigger').click(function() {
    $('.slide-menu').css('left', '0');
  });

  $('.close-button').click(function() {
    $('.slide-menu').css('left', '-450px');
  });

  $('.slide-menu ul li a').click(function() {
    $('.slide-menu').css('left', '-450px');
  });


  // share modal
  $('.share-button').click(function() {
    $('.share-modal').fadeIn();
  });

  $('.close-share-modal-button').click(function() {
    $('.share-modal').fadeOut();
  });

  $( ".share-modal form input" ).keyup(function() {
    $('.share-submit').removeClass('button-disabled');
    $('.share-submit').addClass('button-dark');
    if ($.trim($(this).val()).length == 0){
      $('.share-submit').removeClass('button-dark');
      $('.share-submit').addClass('button-disabled');
    }
  });



  </script>
</html>
